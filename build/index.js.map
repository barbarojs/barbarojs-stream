{"version":3,"file":null,"sources":["../src/stream.js","../src/stream-manager.js","../src/stream-component.js"],"sourcesContent":["import {Subject} from 'rxjs/Subject';\nimport 'rxjs/add/operator/filter';\n\n/**\n * Stream\n * {id: 'componentId', data: {id: 'dataId', mykey: 1}}\n */\nexport default class Stream extends Subject {\n\n\tfilterById(id, dataId) {\n\t\treturn this.filter((data) => dataId\n\t\t\t? (data.id === id && data.data.id === dataId)\n\t\t\t: (data.id === id));\n\t}\n\n\tfilterByIds(ids) {\n\t\treturn this.filter((data) => ids.includes(data.id));\n\t}\n}\n","export default class StreamManager {\n\tconstructor() {\n\t\tthis.subs = [];\n\t}\n\n\tadd(x) {\n\t\tthis.subs.push(x);\n\t}\n\n\tdispatch(channel, actions) {\n\t\tlet actionKeys = Object.keys(actions);\n\t\tlet dispatcher = channel.filter(x => actionKeys.includes(x.id)).subscribe(x => actions[x.id](x.data));\n\n\t\tthis.subs.push(dispatcher);\n\t}\n\n\tdestroy() {\n\t\tthis.subs.map(x => x.unsubscribe());\n\t\tthis.subs = [];\n\t}\n}\n","import {Component} from 'preact';\nimport StreamManager from './stream-manager';\n\nexport default class StreamComponent extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\t// this holds stream constant\n\t\tthis.streams = props.streams;\n\t\t// this is the stream manager\n\t\tthis.sm = new StreamManager();\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.sm.destroy();\n\t}\n}\n"],"names":["Stream","filterById","id","dataId","filter","data","filterByIds","ids","includes","Subject","StreamManager","subs","add","x","push","dispatch","channel","actions","actionKeys","Object","keys","dispatcher","subscribe","destroy","map","unsubscribe","StreamComponent","props","streams","sm","componentWillUnmount","Component"],"mappings":";;;;;;;;;;;;AAAA,AACA,AAEA;;;;;IAIqBA;;;;;;;;;kBAEpBC,iCAAWC,IAAIC,QAAQ;SACf,KAAKC,MAAL,CAAY,UAACC,IAAD;UAAUF,SACzBE,KAAKH,EAAL,KAAYA,EAAZ,IAAkBG,KAAKA,IAAL,CAAUH,EAAV,KAAiBC,MADV,GAEzBE,KAAKH,EAAL,KAAYA,EAFG;GAAZ,CAAP;;;kBAKDI,mCAAYC,KAAK;SACT,KAAKH,MAAL,CAAY,UAACC,IAAD;UAAUE,IAAIC,QAAJ,CAAaH,KAAKH,EAAlB,CAAV;GAAZ,CAAP;;;;EATkCO;;;;ICPfC;0BACN;;;OACRC,IAAL,GAAY,EAAZ;;;yBAGDC,mBAAIC,GAAG;OACDF,IAAL,CAAUG,IAAV,CAAeD,CAAf;;;yBAGDE,6BAASC,SAASC,SAAS;MACtBC,aAAaC,OAAOC,IAAP,CAAYH,OAAZ,CAAjB;MACII,aAAaL,QAAQZ,MAAR,CAAe;UAAKc,WAAWV,QAAX,CAAoBK,EAAEX,EAAtB,CAAL;GAAf,EAA+CoB,SAA/C,CAAyD;UAAKL,QAAQJ,EAAEX,EAAV,EAAcW,EAAER,IAAhB,CAAL;GAAzD,CAAjB;;OAEKM,IAAL,CAAUG,IAAV,CAAeO,UAAf;;;yBAGDE,6BAAU;OACJZ,IAAL,CAAUa,GAAV,CAAc;UAAKX,EAAEY,WAAF,EAAL;GAAd;OACKd,IAAL,GAAY,EAAZ;;;;;;;;;;;;AClBF,AACA,IAEqBe;;;0BAERC,KAAZ,EAAmB;;;;iDAClB,sBAAMA,KAAN,CADkB;;QAGbC,OAAL,GAAeD,MAAMC,OAArB;;QAEKC,EAAL,GAAU,IAAInB,aAAJ,EAAV;;;;2BAGDoB,uDAAuB;OACjBD,EAAL,CAAQN,OAAR;;;;EAX2CQ;;;;"}